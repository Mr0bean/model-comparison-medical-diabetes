# Admin ç®¡ç†é¢æ¿åŠŸèƒ½å¢å¼ºè¯´æ˜

## ğŸ‰ æ–°å¢åŠŸèƒ½

### 1. âœ… è¯¦æƒ…æŸ¥çœ‹åŠŸèƒ½

#### è¯„æµ‹è¯¦æƒ…å¼¹çª—
- ç‚¹å‡»è¯„æµ‹æ•°æ®åˆ—è¡¨ä¸­çš„"æŸ¥çœ‹è¯¦æƒ…"æŒ‰é’®ï¼Œæ‰“å¼€ç¾è§‚çš„è¯¦æƒ…å¼¹çª—
- æ˜¾ç¤ºå®Œæ•´çš„è¯„æµ‹ä¿¡æ¯ï¼š
  - è¯„æµ‹ID
  - å®Œæˆç 
  - æ‚£è€…ä¿¡æ¯
  - æ¨¡å‹ä¿¡æ¯
  - æ€»åˆ†ï¼ˆå¤§å­—ä½“é«˜äº®æ˜¾ç¤ºï¼‰
  - æäº¤æ—¶é—´ï¼ˆç²¾ç¡®åˆ°ç§’ï¼‰
  - å„ç»´åº¦è¯„åˆ†ï¼ˆç½‘æ ¼å¸ƒå±€å±•ç¤ºï¼‰
  - è¯„è®ºå†…å®¹ï¼ˆå¦‚æœæœ‰ï¼‰

#### å®Œæˆç è¯¦æƒ…
- å·²ä½¿ç”¨çš„å®Œæˆç å¯ä»¥æŸ¥çœ‹å…³è”çš„è¯„æµ‹è¯¦æƒ…
- æ˜¾ç¤ºè¯¥å®Œæˆç å¯¹åº”çš„æ‰€æœ‰è¯„æµ‹ä¿¡æ¯

### 2. ğŸ“Š å®Œæˆç™¾åˆ†æ¯”æ˜¾ç¤º

#### è¯„æµ‹æ•°æ®è¡¨ä¸­çš„å®Œæˆè¿›åº¦
- æ¯æ¡è¯„æµ‹è®°å½•éƒ½æ˜¾ç¤ºå®Œæˆè¿›åº¦æ¡
- æ ¹æ®å·²å¡«å†™çš„è¯„åˆ†ç»´åº¦æ•°é‡è®¡ç®—å®Œæˆç™¾åˆ†æ¯”
- è¿›åº¦æ¡å¯è§†åŒ–æ˜¾ç¤ºï¼š80pxå®½åº¦çš„è¿›åº¦æ¡ + ç™¾åˆ†æ¯”æ•°å­—
- ç¤ºä¾‹ï¼šå¦‚æœ5ä¸ªç»´åº¦ä¸­å®Œæˆäº†4ä¸ªï¼Œæ˜¾ç¤º 80%

#### ç»Ÿè®¡å¡ç‰‡ä¸­çš„è¿›åº¦æ¡
- "å·²ä½¿ç”¨å®Œæˆç "å¡ç‰‡æ˜¾ç¤ºä½¿ç”¨è¿›åº¦æ¡
- å®æ—¶æ˜¾ç¤ºä½¿ç”¨ç™¾åˆ†æ¯”
- æ¸å˜ç»¿è‰²è¿›åº¦æ¡ï¼Œè§†è§‰æ•ˆæœæ›´ä½³

### 3. ğŸ“ˆ å®Œæˆç ä½¿ç”¨ç‡å±•ç¤º

#### å®Œæˆç åˆ—è¡¨ä¸­çš„å®Œæˆç‡åˆ—
- æ–°å¢"å®Œæˆç‡"åˆ—ï¼Œç›´è§‚æ˜¾ç¤ºæ¯ä¸ªå®Œæˆç çš„ä½¿ç”¨çŠ¶æ€
- å·²ä½¿ç”¨ï¼šæ˜¾ç¤º 100% ç»¿è‰²è¿›åº¦æ¡
- æœªä½¿ç”¨ï¼šæ˜¾ç¤º 0% ç°è‰²è¿›åº¦æ¡
- åŒ…å«è¿·ä½ è¿›åº¦æ¡å’Œç™¾åˆ†æ¯”æ–‡å­—

#### æ–°å¢ç»Ÿè®¡å¡ç‰‡
- **å®Œæˆç ä½¿ç”¨ç‡**ï¼šæ˜¾ç¤ºå·²ä½¿ç”¨/æ€»æ•°çš„ç™¾åˆ†æ¯”
- å®æ—¶è®¡ç®—å¹¶æ›´æ–°

### 4. ğŸ“Š æ›´ä¸°å¯Œçš„ç»Ÿè®¡

ä»åŸæ¥çš„4ä¸ªç»Ÿè®¡å¡ç‰‡å¢åŠ åˆ° **8ä¸ªç»Ÿè®¡å¡ç‰‡**ï¼š

| ç»Ÿè®¡é¡¹ | è¯´æ˜ | é¢œè‰² |
|--------|------|------|
| æ€»å®Œæˆç æ•° | å·²ç”Ÿæˆçš„å®Œæˆç æ€»æ•° | ç´«è‰² |
| å¯ç”¨å®Œæˆç  | å‰©ä½™å¯ä½¿ç”¨çš„å®Œæˆç  | ç»¿è‰² |
| å·²ä½¿ç”¨å®Œæˆç  | å·²è¢«ä½¿ç”¨çš„å®Œæˆç ï¼ˆå¸¦è¿›åº¦æ¡ï¼‰ | æ©™è‰² |
| **å®Œæˆç ä½¿ç”¨ç‡** | å·²ä½¿ç”¨/æ€»æ•°ç™¾åˆ†æ¯” | è“è‰² |
| æ€»è¯„æµ‹æ•° | ç´¯è®¡æäº¤çš„è¯„æµ‹æ•°é‡ | ç´«è‰² |
| **å¹³å‡åˆ†æ•°** | æ‰€æœ‰è¯„æµ‹çš„å¹³å‡åˆ† | çº¢è‰² |
| **ä»Šæ—¥è¯„æµ‹æ•°** | ä»Šå¤©æäº¤çš„è¯„æµ‹æ•°é‡ | ç´«ç´«è‰² |
| **æ´»è·ƒæ¨¡å‹æ•°** | å‚ä¸è¯„æµ‹çš„æ¨¡å‹æ•°é‡ | é’è‰² |

**æ–°å¢çš„4ä¸ªç»Ÿè®¡é¡¹**ç”¨ç²—ä½“æ ‡å‡º

### 5. ğŸ”„ è½®è¯¢åˆ·æ–°åŠŸèƒ½

#### è‡ªåŠ¨åˆ·æ–°æ§åˆ¶
- ä½äºé¡µé¢å³ä¸Šè§’çš„æ§åˆ¶é¢æ¿
- **å¼€å…³æŒ‰é’®**ï¼šæ¼‚äº®çš„æ»‘åŠ¨å¼€å…³ï¼Œå¯ä¸€é”®å¼€å¯/å…³é—­è‡ªåŠ¨åˆ·æ–°
- **åˆ·æ–°é—´éš”é€‰æ‹©**ï¼š
  - 5ç§’
  - 10ç§’ï¼ˆé»˜è®¤ï¼‰
  - 30ç§’
  - 1åˆ†é’Ÿ
  - 5åˆ†é’Ÿ

#### åˆ·æ–°åŠŸèƒ½
- **ç«‹å³åˆ·æ–°æŒ‰é’®**ï¼šæ‰‹åŠ¨è§¦å‘åˆ·æ–°æ‰€æœ‰æ•°æ®
- è‡ªåŠ¨åˆ·æ–°æ‰€æœ‰æ•°æ®åŒ…æ‹¬ï¼š
  - ç»Ÿè®¡å¡ç‰‡æ•°æ®
  - å®Œæˆç åˆ—è¡¨
  - è¯„æµ‹æ•°æ®åˆ—è¡¨
- æ§åˆ¶å°è¾“å‡ºåˆ·æ–°æ—¶é—´æ—¥å¿—
- åˆ·æ–°æ—¶ä¸ä¼šå¹²æ‰°ç”¨æˆ·æ­£åœ¨è¿›è¡Œçš„æ“ä½œ

## ğŸ¨ ç•Œé¢ä¼˜åŒ–

### 1. æ›´ç¾è§‚çš„å¡ç‰‡è®¾è®¡
- ç»Ÿè®¡å¡ç‰‡é¡¶éƒ¨å¢åŠ æ¸å˜è‰²æ¡
- æ¯ä¸ªå¡ç‰‡éƒ½æœ‰å‰¯æ ‡é¢˜è¯´æ˜
- å“åº”å¼å¸ƒå±€ï¼Œè‡ªåŠ¨é€‚é…ä¸åŒå±å¹•

### 2. è¯¦æƒ…å¼¹çª—åŠ¨ç”»
- æ·¡å…¥æ·¡å‡ºæ•ˆæœ
- ä¸‹æ»‘åŠ¨ç”»æ•ˆæœ
- ç‚¹å‡»å¤–éƒ¨åŒºåŸŸå…³é—­
- æ»šåŠ¨å†…å®¹æ”¯æŒ

### 3. è¿›åº¦æ¡å¯è§†åŒ–
- æ‰€æœ‰è¿›åº¦æ¡é‡‡ç”¨æ¸å˜è‰²è®¾è®¡
- å¹³æ»‘çš„åŠ¨ç”»è¿‡æ¸¡
- æ¸…æ™°çš„ç™¾åˆ†æ¯”æ•°å­—æ˜¾ç¤º

### 4. æŒ‰é’®ä¼˜åŒ–
- ä¸»è¦æŒ‰é’®ï¼šæ¸å˜è‰² + æ‚¬åœé˜´å½±æ•ˆæœ
- æ¬¡è¦æŒ‰é’®ï¼šç°è‰²èƒŒæ™¯
- å°æŒ‰é’®ï¼šç´§å‡‘å°ºå¯¸é€‚åˆè¡¨æ ¼å†…ä½¿ç”¨

## ğŸ“Š æ•°æ®å±•ç¤ºå¢å¼º

### å®Œæˆç åˆ—è¡¨å¢å¼º
- ä»6åˆ—å¢åŠ åˆ°8åˆ—
- æ–°å¢"å®Œæˆç‡"åˆ—
- æ–°å¢"æ“ä½œ"åˆ—ï¼ˆå·²ä½¿ç”¨çš„å®Œæˆç å¯æŸ¥çœ‹è¯¦æƒ…ï¼‰

### è¯„æµ‹æ•°æ®åˆ—è¡¨å¢å¼º
- ä»6åˆ—å¢åŠ åˆ°7åˆ—
- æ–°å¢"å®Œæˆè¿›åº¦"åˆ—
- æ€»åˆ†å­—ä½“åŠ å¤§åŠ ç²—ï¼Œæ›´é†’ç›®
- æ“ä½œæŒ‰é’®æ ·å¼ä¼˜åŒ–

### æœç´¢åŠŸèƒ½å¢å¼º
- æ–°å¢"æ¸…é™¤"æŒ‰é’®ï¼Œä¸€é”®æ¸…ç©ºæ‰€æœ‰æœç´¢æ¡ä»¶
- æ”¯æŒå¤šæ¡ä»¶ç»„åˆæœç´¢

## ğŸ”§ æŠ€æœ¯å®ç°

### è‡ªåŠ¨åˆ·æ–°æœºåˆ¶
```javascript
let autoRefreshInterval = null;

// å¼€å§‹è‡ªåŠ¨åˆ·æ–°
function startAutoRefresh() {
    stopAutoRefresh();
    const seconds = parseInt(document.getElementById('refreshInterval').value);

    autoRefreshInterval = setInterval(() => {
        refreshAll();
        console.log(`è‡ªåŠ¨åˆ·æ–°: ${new Date().toLocaleTimeString()}`);
    }, seconds * 1000);
}

// åœæ­¢è‡ªåŠ¨åˆ·æ–°
function stopAutoRefresh() {
    if (autoRefreshInterval) {
        clearInterval(autoRefreshInterval);
        autoRefreshInterval = null;
    }
}
```

### è¿›åº¦æ¡è®¡ç®—
```javascript
// å®Œæˆç™¾åˆ†æ¯”è®¡ç®—
const completedDimensions = Object.keys(eval.scores || {}).length;
const totalDimensions = 5;
const completionPercentage = Math.round((completedDimensions / totalDimensions) * 100);

// ä½¿ç”¨ç‡è®¡ç®—
const usedPercentage = data.codes.total > 0
    ? ((data.codes.used / data.codes.total) * 100).toFixed(1)
    : 0;
```

### è¯¦æƒ…å¼¹çª—
```javascript
// æŸ¥çœ‹è¯„æµ‹è¯¦æƒ…
async function viewEvaluation(id) {
    const modal = document.getElementById('detailModal');
    modal.style.display = 'block';

    const response = await fetch(`${API_BASE}/admin/evaluation/${id}`);
    const data = await response.json();

    // æ¸²æŸ“è¯¦æƒ…å†…å®¹
    modalBody.innerHTML = `...`;
}
```

## ğŸ“± å“åº”å¼è®¾è®¡

- ç»Ÿè®¡å¡ç‰‡è‡ªåŠ¨é€‚é…ï¼š`grid-template-columns: repeat(auto-fit, minmax(200px, 1fr))`
- è¡¨æ ¼æ¨ªå‘æ»šåŠ¨æ”¯æŒ
- å¼¹çª—æœ€å¤§å®½åº¦800pxï¼Œç§»åŠ¨ç«¯è‡ªé€‚åº”90%å®½åº¦
- æ‰€æœ‰æŒ‰é’®å’Œè¾“å…¥æ¡†éƒ½é€‚é…ç§»åŠ¨ç«¯æ“ä½œ

## ğŸ¯ ä½¿ç”¨åœºæ™¯

1. **å®æ—¶ç›‘æ§**ï¼šå¼€å¯è‡ªåŠ¨åˆ·æ–°ï¼Œå®æ—¶ç›‘æ§è¯„æµ‹ç³»ç»Ÿè¿è¡ŒçŠ¶æ€
2. **æ•°æ®åˆ†æ**ï¼šæŸ¥çœ‹å„ç§ç»Ÿè®¡æ•°æ®ï¼Œäº†è§£ç³»ç»Ÿä½¿ç”¨æƒ…å†µ
3. **è¯¦ç»†å®¡æŸ¥**ï¼šç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…ï¼Œæ·±å…¥äº†è§£æ¯æ¡è¯„æµ‹çš„å®Œæ•´ä¿¡æ¯
4. **è¿›åº¦è¿½è¸ª**ï¼šé€šè¿‡è¿›åº¦æ¡ç›´è§‚äº†è§£è¯„æµ‹å®Œæˆæƒ…å†µ
5. **å®Œæˆç ç®¡ç†**ï¼šæŸ¥çœ‹å®Œæˆç ä½¿ç”¨ç‡ï¼ŒåŠæ—¶ç”Ÿæˆæ–°çš„å®Œæˆç 

## ğŸš€ åç«¯APIè¦æ±‚

ä¸ºäº†æ”¯æŒæ–°åŠŸèƒ½ï¼Œåç«¯APIéœ€è¦è¿”å›ä»¥ä¸‹é¢å¤–æ•°æ®ï¼š

### `/api/admin/stats`
```json
{
  "success": true,
  "codes": {
    "total": 100,
    "active": 45,
    "used": 55
  },
  "evaluations": {
    "total": 55,
    "avgScore": 4.2,      // æ–°å¢ï¼šå¹³å‡åˆ†æ•°
    "todayCount": 12,     // æ–°å¢ï¼šä»Šæ—¥è¯„æµ‹æ•°
    "activeModels": 8     // æ–°å¢ï¼šæ´»è·ƒæ¨¡å‹æ•°
  }
}
```

### `/api/admin/evaluation/:id`
```json
{
  "success": true,
  "data": {
    "_id": "...",
    "code": "ABC123",
    "patient": "æ‚£è€…1",
    "model": "GPT-4",
    "total_score": 4.5,
    "scores": {
      "accuracy": 5,
      "completeness": 4,
      "format": 5,
      "language": 4,
      "logic": 5
    },
    "comments": "è¯„æµ‹è¯„è®ºå†…å®¹",
    "submittedAt": "2025-01-19T10:30:00Z"
  }
}
```

## ğŸŠ æ•ˆæœé¢„è§ˆ

æ‰“å¼€ `admin.html` å³å¯çœ‹åˆ°ï¼š

1. 8ä¸ªç²¾ç¾çš„ç»Ÿè®¡å¡ç‰‡ï¼Œå®æ—¶æ˜¾ç¤ºå„é¡¹æ•°æ®
2. å³ä¸Šè§’çš„è‡ªåŠ¨åˆ·æ–°æ§åˆ¶é¢æ¿
3. å®Œæˆç åˆ—è¡¨ä¸­çš„å®Œæˆç‡è¿›åº¦æ¡
4. è¯„æµ‹æ•°æ®ä¸­çš„å®Œæˆè¿›åº¦æ˜¾ç¤º
5. ç‚¹å‡»"æŸ¥çœ‹è¯¦æƒ…"æ‰“å¼€è¯¦æƒ…å¼¹çª—
6. æ‰€æœ‰è¿›åº¦æ¡éƒ½æœ‰å¹³æ»‘çš„åŠ¨ç”»æ•ˆæœ

æ‰€æœ‰åŠŸèƒ½éƒ½å·²å®Œæ•´å®ç°ï¼Œå¼€ç®±å³ç”¨ï¼ğŸ‰
