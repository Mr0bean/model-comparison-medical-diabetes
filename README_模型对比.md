# 模型横评对比系统使用说明

## 📋 功能介绍

这是一个用于对比不同AI模型在病历生成任务中表现的可视化系统。

### 主要功能

1. **患者选择** - 选择要查看的患者病历
2. **模型对比** - 支持同时选择多个模型进行横向对比
3. **对话类型切换** - 可以查看不同类型的病历内容（主诉、现病史、既往史等）
4. **并排展示** - 多个模型的输出结果并排显示，便于对比
5. **响应式设计** - 支持不同屏幕尺寸

## 🚀 快速开始

### 1. 准备数据

首先运行数据准备脚本：

```bash
python prepare_comparison_data.py
```

这将从 `output/markdown/` 目录读取所有 Markdown 文件，并生成 `output/comparison_data.json`

### 2. 启动本地服务器

由于浏览器的安全限制，需要通过本地服务器访问页面。

**方法 1: 使用 Python**
```bash
# Python 3
python -m http.server 8000

# 然后在浏览器访问: http://localhost:8000/model_comparison.html
```

**方法 2: 使用 Node.js**
```bash
# 安装 http-server
npm install -g http-server

# 启动服务器
http-server -p 8000

# 然后在浏览器访问: http://localhost:8000/model_comparison.html
```

**方法 3: 使用 VS Code**
- 安装 "Live Server" 插件
- 右键点击 `model_comparison.html`
- 选择 "Open with Live Server"

## 📖 使用指南

### 界面说明

1. **顶部标题栏** - 显示系统名称和说明

2. **控制面板**
   - **患者选择器** - 点击患者按钮选择要查看的患者
   - **模型选择器** - 勾选要对比的模型（支持多选）
   - **对话类型选择器** - 选择要查看的病历类型
   - **统计信息** - 显示模型总数、患者数量和已选模型数

3. **对比展示区** - 以卡片形式并排展示不同模型的输出

### 操作步骤

1. **选择患者** - 点击患者按钮（如"患者1"）
2. **选择模型** - 勾选想要对比的模型（建议2-4个）
3. **选择对话类型** - 点击对话类型按钮（如"主诉"）
4. **查看对比** - 在下方查看各模型的输出结果

### 对比技巧

- **2个模型对比** - 适合详细对比两个模型的差异
- **3-4个模型对比** - 适合快速浏览多个模型的表现
- **单个模型** - 查看特定模型的详细输出

## 📊 数据说明

### 支持的模型

系统自动从数据中识别所有模型，包括：

- Baichuan-M2
- deepseek/deepseek-v3.1
- doubao-seed-1-6-251015
- gpt-5.1
- grok-4-0709
- moonshotai/kimi-k2-0905
- qwen3-max

### 对话类型

- **主诉** - 患者的主要症状描述
- **现病史** - 当前疾病的发展过程
- **既往史** - 既往疾病历史
- **家族史** - 家族疾病史
- **预问诊情况总结** - 完整的预问诊总结

## 🎨 界面特点

- **渐变背景** - 现代化的紫色渐变设计
- **卡片布局** - 清晰的模块化展示
- **响应式网格** - 自动适应屏幕大小
- **悬停效果** - 鼠标悬停时的视觉反馈
- **平滑滚动** - 内容区域支持滚动查看

## 🔧 自定义

### 修改颜色主题

编辑 `model_comparison.html` 中的 CSS 变量即可修改主题颜色。

主要颜色定义在：
```css
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
```

### 调整布局

修改 `.comparison-grid` 的 `grid-template-columns` 可以调整卡片列数：

```css
.comparison-grid {
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
}
```

## ⚠️ 注意事项

1. **必须通过HTTP服务器访问** - 直接打开 HTML 文件会因为 CORS 限制无法加载 JSON 数据
2. **数据文件路径** - 确保 `output/comparison_data.json` 存在
3. **浏览器兼容性** - 推荐使用 Chrome、Firefox、Safari 或 Edge 最新版本

## 📂 文件结构

```
chat/
├── model_comparison.html          # 主页面文件
├── prepare_comparison_data.py     # 数据准备脚本
├── output/
│   ├── comparison_data.json      # 对比数据（自动生成）
│   └── markdown/                 # Markdown 源文件
│       ├── gpt-5.1-患者1.md
│       ├── deepseek_deepseek-v3.1-患者1.md
│       └── ...
└── README_模型对比.md            # 本文档
```

## 🐛 故障排除

### 问题: 页面显示"数据加载失败"

**解决方案:**
1. 确认 `output/comparison_data.json` 文件存在
2. 确认通过 HTTP 服务器访问（不是直接打开文件）
3. 检查浏览器控制台的错误信息

### 问题: 页面空白或样式错乱

**解决方案:**
1. 清除浏览器缓存后重新加载
2. 检查浏览器版本是否过旧
3. 尝试使用其他浏览器

### 问题: 某些模型没有数据

**解决方案:**
1. 检查 `output/markdown/` 目录是否包含该模型的文件
2. 重新运行 `prepare_comparison_data.py` 生成数据

## 💡 使用建议

1. **先选择1-2个模型熟悉界面** - 不要一次选择太多模型
2. **逐个对话类型对比** - 系统地查看每种类型的输出
3. **记录对比发现** - 可以截图或记录不同模型的特点
4. **关注输出格式和内容质量** - 不仅要看内容，还要看格式规范性

## 🎯 评估维度建议

在对比模型时，可以关注以下维度：

- ✅ **准确性** - 信息提取是否准确
- ✅ **完整性** - 是否包含所有必要信息
- ✅ **格式规范** - 是否符合医学文书规范
- ✅ **语言表达** - 专业术语使用是否恰当
- ✅ **逻辑性** - 信息组织是否合理

---

如有问题或建议，欢迎反馈！
