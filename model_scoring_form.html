<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŒ»ç–—AIæ¨¡å‹è¾“å‡ºè¯„åˆ†è¡¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 8px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .score-display {
            background: rgba(255,255,255,0.15);
            padding: 20px;
            margin-top: 20px;
            border-radius: 8px;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .score-item {
            text-align: center;
        }

        .score-label {
            font-size: 12px;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .score-value {
            font-size: 36px;
            font-weight: bold;
        }

        .score-grade {
            font-size: 18px;
            margin-top: 5px;
        }

        .content {
            padding: 40px;
        }

        .meta-info {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .meta-field {
            display: flex;
            flex-direction: column;
        }

        .meta-field label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .meta-field input {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }

        .section {
            margin-bottom: 35px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            overflow: hidden;
        }

        .section-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
        }

        .section-score {
            font-size: 14px;
            opacity: 0.9;
        }

        .section-body {
            padding: 25px;
            background: white;
        }

        .score-input-group {
            margin-bottom: 20px;
        }

        .score-slider-container {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 15px;
        }

        .score-slider {
            flex: 1;
            height: 8px;
            -webkit-appearance: none;
            appearance: none;
            background: #ddd;
            border-radius: 4px;
            outline: none;
        }

        .score-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);
        }

        .score-slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);
            border: none;
        }

        .score-number {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
            min-width: 60px;
            text-align: right;
        }

        .grade-indicators {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding: 0 5px;
        }

        .grade-indicator {
            font-size: 11px;
            color: #999;
            text-align: center;
            flex: 1;
        }

        .grade-indicator.active {
            color: #667eea;
            font-weight: bold;
        }

        .notes-area {
            margin-top: 15px;
        }

        .notes-area label {
            display: block;
            font-size: 13px;
            color: #666;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .notes-area textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            font-family: inherit;
            resize: vertical;
            min-height: 80px;
        }

        .notes-area textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .checklist {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .checklist-title {
            font-size: 13px;
            font-weight: 600;
            color: #495057;
            margin-bottom: 10px;
        }

        .checklist-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: 13px;
            color: #666;
        }

        .checklist-item input[type="checkbox"] {
            margin-right: 10px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .help-text {
            font-size: 12px;
            color: #999;
            margin-top: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 4px;
            border-left: 3px solid #667eea;
        }

        .actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            padding: 30px 40px;
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 6px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn-secondary:hover {
            background: #667eea;
            color: white;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .btn-warning:hover {
            background: #e0a800;
        }

        .summary {
            margin-top: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px solid #e9ecef;
        }

        .summary-title {
            font-size: 16px;
            font-weight: 600;
            color: #495057;
            margin-bottom: 15px;
        }

        .summary textarea {
            width: 100%;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            font-family: inherit;
            resize: vertical;
            min-height: 100px;
        }

        .history-section {
            margin-top: 30px;
            padding: 25px;
            background: #fff;
            border-radius: 8px;
            border: 2px solid #e9ecef;
        }

        .history-title {
            font-size: 18px;
            font-weight: 600;
            color: #495057;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .history-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .history-item {
            padding: 15px;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .history-item:hover {
            background: #f8f9fa;
            border-color: #667eea;
        }

        .history-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .history-item-title {
            font-weight: 600;
            color: #495057;
        }

        .history-item-score {
            font-size: 20px;
            font-weight: bold;
            color: #667eea;
        }

        .history-item-meta {
            font-size: 12px;
            color: #999;
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }

            .actions, .history-section {
                display: none;
            }

            .container {
                box-shadow: none;
            }
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: none;
            align-items: center;
            gap: 10px;
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }

        .toast.show {
            display: flex;
        }

        .toast.success {
            border-left: 4px solid #28a745;
        }

        .toast.error {
            border-left: 4px solid #dc3545;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <div class="toast" id="toast">
        <span id="toastMessage"></span>
    </div>

    <div class="container">
        <div class="header">
            <h1>ğŸ“‹ åŒ»ç–—AIæ¨¡å‹è¾“å‡ºè¯„åˆ†è¡¨</h1>
            <p>æ»¡åˆ†100åˆ† Â· 5ä¸ªè¯„ä¼°ç»´åº¦</p>

            <div class="score-display">
                <div class="score-item">
                    <div class="score-label">å½“å‰æ€»åˆ†</div>
                    <div class="score-value" id="totalScore">0</div>
                    <div class="score-grade" id="totalGrade">-</div>
                </div>
            </div>
        </div>

        <div class="content">
            <!-- åŸºæœ¬ä¿¡æ¯ -->
            <div class="meta-info">
                <div class="meta-field">
                    <label>æ¡ˆä¾‹ç¼–å· *</label>
                    <input type="text" id="caseId" placeholder="å¦‚: #001">
                </div>
                <div class="meta-field">
                    <label>è¯„åˆ†å‘˜</label>
                    <input type="text" id="reviewer" placeholder="å§“å">
                </div>
                <div class="meta-field">
                    <label>è¯„åˆ†æ—¥æœŸ</label>
                    <input type="date" id="reviewDate">
                </div>
            </div>

            <!-- ç»´åº¦1: ä¿¡æ¯å‡†ç¡®æ€§ -->
            <div class="section">
                <div class="section-header">
                    <div class="section-title">1ï¸âƒ£ ä¿¡æ¯å‡†ç¡®æ€§</div>
                    <div class="section-score">æ»¡åˆ† 30 åˆ†</div>
                </div>
                <div class="section-body">
                    <div class="score-input-group">
                        <div class="grade-indicators">
                            <div class="grade-indicator" data-range="28-30">ä¼˜ç§€<br>28-30</div>
                            <div class="grade-indicator" data-range="24-27">è‰¯å¥½<br>24-27</div>
                            <div class="grade-indicator" data-range="18-23">ä¸­ç­‰<br>18-23</div>
                            <div class="grade-indicator" data-range="12-17">è¾ƒå·®<br>12-17</div>
                            <div class="grade-indicator" data-range="0-11">å¾ˆå·®<br>0-11</div>
                        </div>
                        <div class="score-slider-container">
                            <input type="range" class="score-slider" id="accuracy" min="0" max="30" value="0" step="1">
                            <div class="score-number"><span id="accuracyValue">0</span> åˆ†</div>
                        </div>
                        <div class="help-text">
                            ğŸ’¡ æ ¸å¿ƒï¼šæ‰€æœ‰ä¿¡æ¯å¿…é¡»ä¸åŸå§‹å¯¹è¯ä¸€è‡´ï¼Œä¸èƒ½æœ‰ä»»ä½•é”™è¯¯æˆ–æ›²è§£
                        </div>
                    </div>

                    <div class="checklist">
                        <div class="checklist-title">ğŸ” æ£€æŸ¥æ¸…å•</div>
                        <div class="checklist-item">
                            <input type="checkbox" id="acc-check1">
                            <label for="acc-check1">æ‚£è€…åŸºæœ¬ä¿¡æ¯ï¼ˆæ€§åˆ«ã€å¹´é¾„ã€èº«é«˜ã€ä½“é‡ï¼‰å‡†ç¡®</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="acc-check2">
                            <label for="acc-check2">ç—…ç¨‹æ—¶é—´å‡†ç¡®</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="acc-check3">
                            <label for="acc-check3">æ‰€æœ‰è¯ç‰©åç§°ã€å‰‚é‡ã€é¢‘æ¬¡å‡†ç¡®</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="acc-check4">
                            <label for="acc-check4">æ‰€æœ‰æ£€æŸ¥æ•°å€¼åŠå•ä½å‡†ç¡®</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="acc-check5">
                            <label for="acc-check5">æ— æ— ä¸­ç”Ÿæœ‰çš„ä¿¡æ¯</label>
                        </div>
                    </div>

                    <div class="notes-area">
                        <label>ğŸ“ å‘ç°çš„é”™è¯¯åŠæ‰£åˆ†è¯´æ˜</label>
                        <textarea id="accuracyNotes" placeholder="è®°å½•å…·ä½“é”™è¯¯ï¼Œå¦‚ï¼šè¯ç‰©å‰‚é‡é”™è¯¯(-3åˆ†)ï¼Œè¡€ç³–æ•°å€¼é”™è¯¯(-5åˆ†)..."></textarea>
                    </div>
                </div>
            </div>

            <!-- ç»´åº¦2: ä¿¡æ¯å®Œæ•´æ€§ -->
            <div class="section">
                <div class="section-header">
                    <div class="section-title">2ï¸âƒ£ ä¿¡æ¯å®Œæ•´æ€§</div>
                    <div class="section-score">æ»¡åˆ† 25 åˆ†</div>
                </div>
                <div class="section-body">
                    <div class="score-input-group">
                        <div class="grade-indicators">
                            <div class="grade-indicator" data-range="23-25">ä¼˜ç§€<br>23-25</div>
                            <div class="grade-indicator" data-range="19-22">è‰¯å¥½<br>19-22</div>
                            <div class="grade-indicator" data-range="14-18">ä¸­ç­‰<br>14-18</div>
                            <div class="grade-indicator" data-range="8-13">è¾ƒå·®<br>8-13</div>
                            <div class="grade-indicator" data-range="0-7">å¾ˆå·®<br>0-7</div>
                        </div>
                        <div class="score-slider-container">
                            <input type="range" class="score-slider" id="completeness" min="0" max="25" value="0" step="1">
                            <div class="score-number"><span id="completenessValue">0</span> åˆ†</div>
                        </div>
                        <div class="help-text">
                            ğŸ’¡ æ ¸å¿ƒï¼šæ‰€æœ‰å…³é”®ä¿¡æ¯éƒ½åº”è¢«æå–ï¼Œä¸èƒ½æœ‰é‡è¦é—æ¼
                        </div>
                    </div>

                    <div class="checklist">
                        <div class="checklist-title">ğŸ” å¿…éœ€ä¿¡æ¯æ¸…å•ï¼ˆâ­é«˜ä¼˜å…ˆçº§ï¼‰</div>
                        <div class="checklist-item">
                            <input type="checkbox" id="comp-check1">
                            <label for="comp-check1">ä¸»è¯‰/å°±è¯ŠåŸå› </label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="comp-check2">
                            <label for="comp-check2">ç—…ç¨‹æ—¶é—´</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="comp-check3">
                            <label for="comp-check3">å½“å‰ç”¨è¯æ–¹æ¡ˆï¼ˆè¯å+å‰‚é‡+é¢‘æ¬¡ï¼‰</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="comp-check4">
                            <label for="comp-check4">è¿‘æœŸæ£€æŸ¥ç»“æœ</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="comp-check5">
                            <label for="comp-check5">é‡è¦ç—‡çŠ¶</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="comp-check6">
                            <label for="comp-check6">æ—¢å¾€æ²»ç–—å²</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="comp-check7">
                            <label for="comp-check7">å®¶æ—å²</label>
                        </div>
                    </div>

                    <div class="notes-area">
                        <label>ğŸ“ é—æ¼çš„ä¿¡æ¯</label>
                        <textarea id="completenessNotes" placeholder="è®°å½•é—æ¼çš„å…³é”®ä¿¡æ¯ï¼Œå¦‚ï¼šæœªæåŠä½é™¢å²ã€ç¼ºå°‘ç”¨è¯å‰‚é‡..."></textarea>
                    </div>
                </div>
            </div>

            <!-- ç»´åº¦3: ä¸´åºŠå®ç”¨æ€§ -->
            <div class="section">
                <div class="section-header">
                    <div class="section-title">3ï¸âƒ£ ä¸´åºŠå®ç”¨æ€§</div>
                    <div class="section-score">æ»¡åˆ† 20 åˆ†</div>
                </div>
                <div class="section-body">
                    <div class="score-input-group">
                        <div class="grade-indicators">
                            <div class="grade-indicator" data-range="18-20">ä¼˜ç§€<br>18-20</div>
                            <div class="grade-indicator" data-range="15-17">è‰¯å¥½<br>15-17</div>
                            <div class="grade-indicator" data-range="11-14">ä¸­ç­‰<br>11-14</div>
                            <div class="grade-indicator" data-range="6-10">è¾ƒå·®<br>6-10</div>
                            <div class="grade-indicator" data-range="0-5">å¾ˆå·®<br>0-5</div>
                        </div>
                        <div class="score-slider-container">
                            <input type="range" class="score-slider" id="clinical" min="0" max="20" value="0" step="1">
                            <div class="score-number"><span id="clinicalValue">0</span> åˆ†</div>
                        </div>
                        <div class="help-text">
                            ğŸ’¡ æ ¸å¿ƒï¼šä¿¡æ¯ç»„ç»‡åº”çªå‡ºä¸´åºŠå…³é”®ç‚¹ï¼Œæœ‰åŠ©äºå¿«é€Ÿåšå‡ºè¯Šç–—å†³ç­–
                        </div>
                    </div>

                    <div class="checklist">
                        <div class="checklist-title">ğŸ” ä¸´åºŠå…³é”®ç‚¹ï¼ˆæ¯çªå‡º1é¡¹ +2-3åˆ†ï¼‰</div>
                        <div class="checklist-item">
                            <input type="checkbox" id="cli-check1">
                            <label for="cli-check1">è¡€ç³–æ§åˆ¶æƒ…å†µåŠæ§åˆ¶ç›®æ ‡</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="cli-check2">
                            <label for="cli-check2">ä½“é‡å¼‚å¸¸å˜åŒ–</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="cli-check3">
                            <label for="cli-check3">å½“å‰å®Œæ•´ç”¨è¯æ–¹æ¡ˆ</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="cli-check4">
                            <label for="cli-check4">å¹¶å‘ç—‡çº¿ç´¢ï¼ˆå¦‚æ³¡æ²«å°¿ï¼‰</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="cli-check5">
                            <label for="cli-check5">å®¶æ—å²ï¼ˆå¼ºå®¶æ—å²å½±å“é¢„åï¼‰</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="cli-check6">
                            <label for="cli-check6">æœ‰"é‡ç‚¹å…³æ³¨"æˆ–é£é™©æç¤ºåŒºåŸŸ</label>
                        </div>
                    </div>

                    <div class="notes-area">
                        <label>ğŸ“ ä¸´åºŠå®ç”¨æ€§è¯„ä»·</label>
                        <textarea id="clinicalNotes" placeholder="è®°å½•çªå‡ºçš„å…³é”®ç‚¹å’Œä¸è¶³ä¹‹å¤„..."></textarea>
                    </div>
                </div>
            </div>

            <!-- ç»´åº¦4: ç»“æ„æ¸…æ™°åº¦ -->
            <div class="section">
                <div class="section-header">
                    <div class="section-title">4ï¸âƒ£ ç»“æ„æ¸…æ™°åº¦</div>
                    <div class="section-score">æ»¡åˆ† 15 åˆ†</div>
                </div>
                <div class="section-body">
                    <div class="score-input-group">
                        <div class="grade-indicators">
                            <div class="grade-indicator" data-range="14-15">ä¼˜ç§€<br>14-15</div>
                            <div class="grade-indicator" data-range="11-13">è‰¯å¥½<br>11-13</div>
                            <div class="grade-indicator" data-range="8-10">ä¸­ç­‰<br>8-10</div>
                            <div class="grade-indicator" data-range="4-7">è¾ƒå·®<br>4-7</div>
                            <div class="grade-indicator" data-range="0-3">å¾ˆå·®<br>0-3</div>
                        </div>
                        <div class="score-slider-container">
                            <input type="range" class="score-slider" id="structure" min="0" max="15" value="0" step="1">
                            <div class="score-number"><span id="structureValue">0</span> åˆ†</div>
                        </div>
                        <div class="help-text">
                            ğŸ’¡ æ ¸å¿ƒï¼šä¿¡æ¯ç»„ç»‡æ¸…æ™°ã€å±‚æ¬¡åˆ†æ˜ã€æ˜“äºæŸ¥æ‰¾
                        </div>
                    </div>

                    <div class="checklist">
                        <div class="checklist-title">ğŸ” ç»“æ„è¯„ä¼°è¦ç‚¹</div>
                        <div class="checklist-item">
                            <input type="checkbox" id="str-check1">
                            <label for="str-check1">æœ‰æ¸…æ™°çš„ç« èŠ‚åˆ’åˆ†</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="str-check2">
                            <label for="str-check2">ä½¿ç”¨æ ‡é¢˜å±‚çº§ï¼ˆ#, ##, ###ï¼‰</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="str-check3">
                            <label for="str-check3">ç›¸å…³ä¿¡æ¯å½’ç±»åˆç†</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="str-check4">
                            <label for="str-check4">æ—¶é—´çº¿æ¸…æ™°</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="str-check5">
                            <label for="str-check5">ä½¿ç”¨åˆ—è¡¨/è¡¨æ ¼ç»„ç»‡ä¿¡æ¯</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="str-check6">
                            <label for="str-check6">èƒ½å¿«é€Ÿå®šä½å…³é”®ä¿¡æ¯</label>
                        </div>
                    </div>

                    <div class="notes-area">
                        <label>ğŸ“ ç»“æ„ç‰¹ç‚¹åŠé—®é¢˜</label>
                        <textarea id="structureNotes" placeholder="è®°å½•ç»“æ„ä¼˜ç‚¹å’Œä¸è¶³..."></textarea>
                    </div>
                </div>
            </div>

            <!-- ç»´åº¦5: è¯­è¨€ä¸“ä¸šæ€§ -->
            <div class="section">
                <div class="section-header">
                    <div class="section-title">5ï¸âƒ£ è¯­è¨€ä¸“ä¸šæ€§</div>
                    <div class="section-score">æ»¡åˆ† 10 åˆ†</div>
                </div>
                <div class="section-body">
                    <div class="score-input-group">
                        <div class="grade-indicators">
                            <div class="grade-indicator" data-range="9-10">ä¼˜ç§€<br>9-10</div>
                            <div class="grade-indicator" data-range="7-8">è‰¯å¥½<br>7-8</div>
                            <div class="grade-indicator" data-range="5-6">ä¸­ç­‰<br>5-6</div>
                            <div class="grade-indicator" data-range="3-4">è¾ƒå·®<br>3-4</div>
                            <div class="grade-indicator" data-range="0-2">å¾ˆå·®<br>0-2</div>
                        </div>
                        <div class="score-slider-container">
                            <input type="range" class="score-slider" id="language" min="0" max="10" value="0" step="1">
                            <div class="score-number"><span id="languageValue">0</span> åˆ†</div>
                        </div>
                        <div class="help-text">
                            ğŸ’¡ æ ¸å¿ƒï¼šè¯­è¨€ä¸“ä¸šã€ç®€æ´ã€æµç•…ï¼Œç¬¦åˆåŒ»ç–—æ–‡ä¹¦è§„èŒƒ
                        </div>
                    </div>

                    <div class="checklist">
                        <div class="checklist-title">ğŸ” è¯­è¨€è´¨é‡æ£€æŸ¥</div>
                        <div class="checklist-item">
                            <input type="checkbox" id="lan-check1">
                            <label for="lan-check1">åŒ»å­¦æœ¯è¯­ä½¿ç”¨å‡†ç¡®</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="lan-check2">
                            <label for="lan-check2">è¡¨è¾¾ç®€æ´ï¼Œæ— å†—ä½™</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="lan-check3">
                            <label for="lan-check3">è¯­å¥é€šé¡ºï¼Œæ— è¯­ç—…</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="lan-check4">
                            <label for="lan-check4">é¿å…å£è¯­åŒ–è¡¨è¾¾</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="lan-check5">
                            <label for="lan-check5">ä¸“ä¸šæ€§å¼º</label>
                        </div>
                    </div>

                    <div class="notes-area">
                        <label>ğŸ“ è¯­è¨€é—®é¢˜</label>
                        <textarea id="languageNotes" placeholder="è®°å½•å†—ä½™ã€å£è¯­åŒ–ã€ä¸ä¸“ä¸šç­‰é—®é¢˜..."></textarea>
                    </div>
                </div>
            </div>

            <!-- æ€»ä½“è¯„ä»· -->
            <div class="summary">
                <div class="summary-title">ğŸ“Š æ€»ä½“è¯„ä»·</div>
                <textarea id="overallNotes" placeholder="ç»¼åˆè¯„ä»·æ¨¡å‹è¾“å‡ºçš„ä¼˜ç‚¹ã€é—®é¢˜å’Œæ”¹è¿›å»ºè®®ï¼ˆ50-100å­—ï¼‰..."></textarea>
            </div>

            <!-- ä¸´åºŠå¯ç”¨æ€§ -->
            <div class="summary">
                <div class="summary-title">ğŸ¥ ä¸´åºŠå¯ç”¨æ€§åˆ¤æ–­</div>
                <div style="display: flex; gap: 15px; margin-top: 10px;">
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                        <input type="radio" name="usability" value="direct" style="width: 18px; height: 18px;">
                        <span>âœ… å¯ç›´æ¥ä½¿ç”¨</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                        <input type="radio" name="usability" value="minor" style="width: 18px; height: 18px;">
                        <span>âš ï¸ éœ€ç¨ä½œä¿®æ”¹</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                        <input type="radio" name="usability" value="major" style="width: 18px; height: 18px;">
                        <span>âš ï¸ éœ€å¤§é‡ä¿®æ”¹</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                        <input type="radio" name="usability" value="unusable" style="width: 18px; height: 18px;">
                        <span>âŒ ä¸å¯ç”¨</span>
                    </label>
                </div>
            </div>
        </div>

        <div class="actions">
            <button class="btn btn-success" onclick="saveScore()">ğŸ’¾ ä¿å­˜è¯„åˆ†</button>
            <button class="btn btn-primary" onclick="exportPDF()">ğŸ“„ å¯¼å‡ºPDF</button>
            <button class="btn btn-warning" onclick="resetForm()">ğŸ”„ é‡ç½®è¡¨å•</button>
            <button class="btn btn-secondary" onclick="toggleHistory()">ğŸ“š è¯„åˆ†å†å²</button>
        </div>

        <!-- è¯„åˆ†å†å² -->
        <div class="history-section" id="historySection" style="display: none;">
            <div class="history-title">
                <span>ğŸ“š è¯„åˆ†å†å²</span>
                <button class="btn btn-secondary" style="padding: 8px 16px; font-size: 13px;" onclick="clearHistory()">æ¸…ç©ºå†å²</button>
            </div>
            <div class="history-list" id="historyList">
                <!-- å†å²è®°å½•å°†åŠ¨æ€åŠ è½½ -->
            </div>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // è®¾ç½®é»˜è®¤æ—¥æœŸ
            document.getElementById('reviewDate').valueAsDate = new Date();

            // ç»‘å®šæ»‘å—äº‹ä»¶
            setupSliders();

            // åŠ è½½å†å²è®°å½•
            loadHistory();
        });

        // è®¾ç½®æ»‘å—
        function setupSliders() {
            const sliders = [
                { id: 'accuracy', max: 30, ranges: [[28,30],[24,27],[18,23],[12,17],[0,11]] },
                { id: 'completeness', max: 25, ranges: [[23,25],[19,22],[14,18],[8,13],[0,7]] },
                { id: 'clinical', max: 20, ranges: [[18,20],[15,17],[11,14],[6,10],[0,5]] },
                { id: 'structure', max: 15, ranges: [[14,15],[11,13],[8,10],[4,7],[0,3]] },
                { id: 'language', max: 10, ranges: [[9,10],[7,8],[5,6],[3,4],[0,2]] }
            ];

            sliders.forEach(slider => {
                const element = document.getElementById(slider.id);
                const valueDisplay = document.getElementById(slider.id + 'Value');
                const gradeIndicators = element.closest('.section-body').querySelectorAll('.grade-indicator');

                element.addEventListener('input', function() {
                    const value = parseInt(this.value);
                    valueDisplay.textContent = value;

                    // æ›´æ–°ç­‰çº§æŒ‡ç¤ºå™¨
                    gradeIndicators.forEach(indicator => {
                        indicator.classList.remove('active');
                        const range = indicator.dataset.range.split('-').map(Number);
                        if (value >= range[0] && value <= range[1]) {
                            indicator.classList.add('active');
                        }
                    });

                    updateTotalScore();
                });
            });
        }

        // æ›´æ–°æ€»åˆ†
        function updateTotalScore() {
            const accuracy = parseInt(document.getElementById('accuracy').value);
            const completeness = parseInt(document.getElementById('completeness').value);
            const clinical = parseInt(document.getElementById('clinical').value);
            const structure = parseInt(document.getElementById('structure').value);
            const language = parseInt(document.getElementById('language').value);

            const total = accuracy + completeness + clinical + structure + language;

            document.getElementById('totalScore').textContent = total;

            // æ›´æ–°ç­‰çº§
            let grade = '';
            if (total >= 90) grade = 'ğŸ† A+ ä¼˜ç§€';
            else if (total >= 80) grade = 'â­ A è‰¯å¥½';
            else if (total >= 70) grade = 'ğŸ‘ B ä¸­ç­‰åä¸Š';
            else if (total >= 60) grade = 'ğŸ˜ C ä¸­ç­‰';
            else if (total >= 50) grade = 'ğŸ˜• D åŠæ ¼';
            else grade = 'âŒ F ä¸åŠæ ¼';

            document.getElementById('totalGrade').textContent = grade;
        }

        // ä¿å­˜è¯„åˆ†
        function saveScore() {
            const caseId = document.getElementById('caseId').value;
            if (!caseId) {
                showToast('è¯·å¡«å†™æ¡ˆä¾‹ç¼–å·', 'error');
                return;
            }

            const data = {
                caseId: caseId,
                reviewer: document.getElementById('reviewer').value,
                date: document.getElementById('reviewDate').value,
                scores: {
                    accuracy: parseInt(document.getElementById('accuracy').value),
                    completeness: parseInt(document.getElementById('completeness').value),
                    clinical: parseInt(document.getElementById('clinical').value),
                    structure: parseInt(document.getElementById('structure').value),
                    language: parseInt(document.getElementById('language').value),
                    total: parseInt(document.getElementById('totalScore').textContent)
                },
                notes: {
                    accuracy: document.getElementById('accuracyNotes').value,
                    completeness: document.getElementById('completenessNotes').value,
                    clinical: document.getElementById('clinicalNotes').value,
                    structure: document.getElementById('structureNotes').value,
                    language: document.getElementById('languageNotes').value,
                    overall: document.getElementById('overallNotes').value
                },
                usability: document.querySelector('input[name="usability"]:checked')?.value || '',
                timestamp: new Date().toISOString()
            };

            // ä¿å­˜åˆ°localStorage
            let history = JSON.parse(localStorage.getItem('scoringHistory') || '[]');
            history.unshift(data);
            localStorage.setItem('scoringHistory', JSON.stringify(history));

            showToast('è¯„åˆ†å·²ä¿å­˜ï¼', 'success');
            loadHistory();
        }

        // å¯¼å‡ºPDFï¼ˆæ‰“å°ï¼‰
        function exportPDF() {
            window.print();
        }

        // é‡ç½®è¡¨å•
        function resetForm() {
            if (confirm('ç¡®å®šè¦é‡ç½®è¡¨å•å—ï¼Ÿå½“å‰å¡«å†™çš„å†…å®¹å°†ä¸¢å¤±ã€‚')) {
                document.querySelectorAll('.score-slider').forEach(slider => {
                    slider.value = 0;
                    slider.dispatchEvent(new Event('input'));
                });
                document.querySelectorAll('textarea').forEach(textarea => {
                    textarea.value = '';
                });
                document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                    checkbox.checked = false;
                });
                document.querySelectorAll('input[type="radio"]').forEach(radio => {
                    radio.checked = false;
                });
                document.getElementById('caseId').value = '';
                updateTotalScore();
                showToast('è¡¨å•å·²é‡ç½®', 'success');
            }
        }

        // åˆ‡æ¢å†å²è®°å½•æ˜¾ç¤º
        function toggleHistory() {
            const section = document.getElementById('historySection');
            section.style.display = section.style.display === 'none' ? 'block' : 'none';
        }

        // åŠ è½½å†å²è®°å½•
        function loadHistory() {
            const history = JSON.parse(localStorage.getItem('scoringHistory') || '[]');
            const listElement = document.getElementById('historyList');

            if (history.length === 0) {
                listElement.innerHTML = '<p style="text-align: center; color: #999; padding: 20px;">æš‚æ— è¯„åˆ†è®°å½•</p>';
                return;
            }

            listElement.innerHTML = history.map((item, index) => `
                <div class="history-item" onclick="loadScore(${index})">
                    <div class="history-item-header">
                        <div class="history-item-title">${item.caseId} - ${item.reviewer || 'åŒ¿å'}</div>
                        <div class="history-item-score">${item.scores.total} åˆ†</div>
                    </div>
                    <div class="history-item-meta">
                        ${new Date(item.timestamp).toLocaleString('zh-CN')} Â·
                        å‡†ç¡®æ€§${item.scores.accuracy} + å®Œæ•´æ€§${item.scores.completeness} + å®ç”¨æ€§${item.scores.clinical} + ç»“æ„${item.scores.structure} + è¯­è¨€${item.scores.language}
                    </div>
                </div>
            `).join('');
        }

        // åŠ è½½æŸæ¡è¯„åˆ†è®°å½•
        function loadScore(index) {
            const history = JSON.parse(localStorage.getItem('scoringHistory') || '[]');
            const data = history[index];

            if (!data) return;

            document.getElementById('caseId').value = data.caseId;
            document.getElementById('reviewer').value = data.reviewer;
            document.getElementById('reviewDate').value = data.date;

            document.getElementById('accuracy').value = data.scores.accuracy;
            document.getElementById('completeness').value = data.scores.completeness;
            document.getElementById('clinical').value = data.scores.clinical;
            document.getElementById('structure').value = data.scores.structure;
            document.getElementById('language').value = data.scores.language;

            document.querySelectorAll('.score-slider').forEach(slider => {
                slider.dispatchEvent(new Event('input'));
            });

            document.getElementById('accuracyNotes').value = data.notes.accuracy || '';
            document.getElementById('completenessNotes').value = data.notes.completeness || '';
            document.getElementById('clinicalNotes').value = data.notes.clinical || '';
            document.getElementById('structureNotes').value = data.notes.structure || '';
            document.getElementById('languageNotes').value = data.notes.language || '';
            document.getElementById('overallNotes').value = data.notes.overall || '';

            if (data.usability) {
                document.querySelector(`input[name="usability"][value="${data.usability}"]`).checked = true;
            }

            window.scrollTo({ top: 0, behavior: 'smooth' });
            toggleHistory();
            showToast('å·²åŠ è½½å†å²è®°å½•', 'success');
        }

        // æ¸…ç©ºå†å²
        function clearHistory() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰è¯„åˆ†å†å²å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚')) {
                localStorage.removeItem('scoringHistory');
                loadHistory();
                showToast('å†å²è®°å½•å·²æ¸…ç©º', 'success');
            }
        }

        // æ˜¾ç¤ºæç¤º
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const messageElement = document.getElementById('toastMessage');

            messageElement.textContent = message;
            toast.className = `toast ${type} show`;

            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html>
