# AI评测标准文档

## 概述

本文档定义了AI模型对病历摘要的自动评测标准，基于用户评测的三维度评分体系，为AI评测提供详细的评分规则和prompt指引。

## 评测维度与权重

采用百分制评分体系（满分100分），包含3个核心维度：

| 维度 | 权重 | 满分 | 星级转换 |
|------|------|------|----------|
| **准确性** | 40% | 40分 | 5星×8 |
| **完整性** | 35% | 35分 | 5星×7 |
| **规范性** | 25% | 25分 | 5星×5 |

**总分计算公式：**
```
总分 = 准确性分数 + 完整性分数 + 规范性分数
     = (准确性星级×8) + (完整性星级×7) + (规范性星级×5)
```

---

## 维度一：准确性（40分）

### 评分原则

准确性是最重要的评测维度，要求病历内容与原始医患对话**完全一致**，不得添加、遗漏或篡改任何信息。

### 评分细则

#### 1. 数值准确性（8分）
- **血糖数值**：空腹血糖、餐后血糖、随机血糖
- **糖化血红蛋白**：HbA1c数值
- **体重指标**：体重、BMI
- **血压数值**：收缩压/舒张压
- **检查结果**：所有实验室检查数据

**扣分规则：**
- 数值错误：每处扣2分
- 单位错误：每处扣1分
- 数值遗漏：每处扣1.5分

#### 2. 药物信息准确性（10分）
- **药物名称**：通用名、商品名
- **药物剂量**：具体数值和单位
- **用药频率**：每日次数、用药时间
- **用药方式**：口服、注射等

**扣分规则：**
- 药名错误：每处扣3分
- 剂量错误：每处扣2分
- 用法错误：每处扣1.5分
- 药物遗漏：每种扣2分

#### 3. 时间轴准确性（8分）
- **发病时间**：首次诊断时间
- **就诊时间**：历次就诊记录
- **病程时间**：病程长短描述
- **症状时间**：症状出现和持续时间

**扣分规则：**
- 时间错误：每处扣2分
- 时间顺序混乱：扣3分
- 时间表述不清：每处扣1分

#### 4. 诊断准确性（8分）
- **主要诊断**：糖尿病类型、分期
- **并发症诊断**：视网膜病变、肾病等
- **合并症诊断**：高血压、血脂异常等

**扣分规则：**
- 诊断错误：每处扣3分
- 诊断遗漏：每处扣2分
- 诊断表述不准确：每处扣1分

#### 5. 病程描述准确性（6分）
- 病情发展过程
- 治疗调整历程
- 症状变化情况

**扣分规则：**
- 事实性错误：每处扣2分
- 逻辑错误：每处扣1.5分

#### 6. **固定扣分项（一票否决）**
⚠️ **糖尿病写入既往史：直接扣10分**
- 糖尿病应写在"主诉"和"现病史"中
- 不得将糖尿病作为既往病史

---

## 维度二：完整性（35分）

### 评分原则

病历摘要应包含完整的医疗信息结构，覆盖所有关键模块。

### 必备模块及评分

#### 1. 主诉（7分）
**必须包含：**
- 主要症状描述
- 症状持续时间

**完整示例：**
```
"口渴、多饮、多尿3年"
"血糖控制不佳6个月"
```

**扣分规则：**
- 缺少症状描述：扣4分
- 缺少时间：扣3分
- 表述不规范：扣1-2分

#### 2. 现病史（14分）
**必须包含：**
- **初次诊断情况**（3分）：诊断时间、诊断经过
- **治疗历程**（4分）：药物调整、治疗变化
- **近期病情**（4分）：血糖控制、症状变化
- **并发症情况**（3分）：是否有并发症及表现

**扣分规则：**
- 每缺一个子模块：扣2-4分
- 内容不完整：扣1-2分

#### 3. 既往史（7分）
**必须包含：**
- 高血压病史
- 高血脂病史
- 冠心病病史
- 其他慢性病史
- 手术史（如有）

**扣分规则：**
- 每缺少一个重要病史：扣2-3分
- ⚠️ **若将糖尿病写入既往史：直接扣10分（准确性维度）**

#### 4. 家族史（4分）
**必须包含：**
- 糖尿病家族史
- 高血压家族史（如有）
- 其他相关家族史

**扣分规则：**
- 完全缺失：扣4分
- 信息不完整：扣1-2分

#### 5. 个人史（3分，可选）
**可包含：**
- 吸烟史
- 饮酒史
- 饮食习惯
- 运动情况

**扣分规则：**
- 若对话中提及但未记录：扣1-2分

---

## 维度三：规范性（25分）

### 评分原则

病历书写应符合医学专业规范，使用标准医学术语，结构清晰。

### 评分细则

#### 1. 医学术语规范（8分）
**要求：**
- 使用标准医学术语，避免口语化
- 疾病名称使用规范表述
- 症状描述医学化

**示例对比：**
| 口语化 ❌ | 规范表述 ✅ |
|-----------|------------|
| 经常口渴 | 多饮 |
| 尿很多 | 多尿 |
| 看不清楚 | 视物模糊 |
| 脚麻 | 下肢麻木 |
| 血糖高 | 血糖升高/血糖控制不佳 |

**扣分规则：**
- 口语化表述：每处扣1分
- 术语错误：每处扣2分

#### 2. 结构规范（7分）
**要求：**
- 模块齐全
- 顺序正确：主诉→现病史→既往史→家族史→个人史
- 层次分明

**标准结构：**
```
主诉：症状 + 时间
现病史：
  - 初次诊断
  - 治疗经过
  - 近期情况
  - 并发症
既往史：相关疾病史
家族史：遗传相关
个人史（可选）：生活习惯
```

**扣分规则：**
- 模块顺序错误：扣2分
- 结构混乱：扣3分
- 缺少层次：扣1-2分

#### 3. 药物书写规范（5分）
**要求：**
- 药名规范：优先使用通用名
- 剂量规范：数值+单位
- 用法规范：频率+时间

**规范示例：**
```
✅ 二甲双胍片 500mg 每日2次，早晚餐后口服
✅ 门冬胰岛素 12U 餐前皮下注射
```

**不规范示例：**
```
❌ 二甲双胍 一天两次
❌ 打胰岛素
```

**扣分规则：**
- 药名不规范：每处扣1分
- 剂量不清：每处扣1分
- 用法不明：每处扣1分

#### 4. 时间表述规范（3分）
**要求：**
- 时间明确具体
- 时间单位统一
- 时间顺序清晰

**规范示例：**
```
✅ "3年前诊断为2型糖尿病"
✅ "近6个月血糖控制不佳"
```

**不规范示例：**
```
❌ "很久以前得了糖尿病"
❌ "最近血糖不好"
```

**扣分规则：**
- 时间不明确：每处扣1分
- 时间表述混乱：扣2分

#### 5. 整体专业性（2分）
**要求：**
- 语言简洁专业
- 逻辑严密
- 无明显非医学表述

**扣分规则：**
- 整体不够专业：扣1-2分

---

## 星级评分对应表

### 准确性维度（40分）

| 星级 | 分数 | 对应标准 |
|------|------|----------|
| ⭐⭐⭐⭐⭐ (5星) | 40分 | 完全准确，无任何错误 |
| ⭐⭐⭐⭐ (4星) | 32分 | 极少错误（1-2处小错） |
| ⭐⭐⭐ (3星) | 24分 | 有少量错误（3-5处） |
| ⭐⭐ (2星) | 16分 | 错误较多（6-10处） |
| ⭐ (1星) | 8分 | 严重错误或重大遗漏 |

### 完整性维度（35分）

| 星级 | 分数 | 对应标准 |
|------|------|----------|
| ⭐⭐⭐⭐⭐ (5星) | 35分 | 所有模块完整，信息全面 |
| ⭐⭐⭐⭐ (4星) | 28分 | 缺少1个次要模块或信息不够详细 |
| ⭐⭐⭐ (3星) | 21分 | 缺少2个模块或多处信息不完整 |
| ⭐⭐ (2星) | 14分 | 缺少3个模块，信息明显不足 |
| ⭐ (1星) | 7分 | 严重不完整，缺少主要模块 |

### 规范性维度（25分）

| 星级 | 分数 | 对应标准 |
|------|------|----------|
| ⭐⭐⭐⭐⭐ (5星) | 25分 | 完全符合医学规范，专业性强 |
| ⭐⭐⭐⭐ (4星) | 20分 | 基本规范，少量表述可优化 |
| ⭐⭐⭐ (3星) | 15分 | 有一定规范性，但有改进空间 |
| ⭐⭐ (2星) | 10分 | 规范性不足，口语化较多 |
| ⭐ (1星) | 5分 | 不规范，缺乏专业性 |

---

## AI评测Prompt模板

### 基础Prompt结构

```
你是一位专业的医疗病历质量评测专家，负责评估AI生成的病历摘要质量。

【评测任务】
请根据以下原始医患对话记录和AI生成的病历摘要，按照三个维度进行评分：

1. **准确性（40分）**：病历内容与对话是否完全一致
2. **完整性（35分）**：是否包含所有必要的病历模块
3. **规范性（25分）**：是否符合医学书写规范

【原始对话】
{conversation_text}

【AI生成的病历摘要】
{medical_record}

【评分标准】
{详细的评分标准，见下方}

【输出格式】
请按以下JSON格式输出评分结果：
```json
{
  "accuracy": {
    "score": 0-40,
    "stars": 1-5,
    "deductions": [
      {"item": "扣分项", "points": 扣分, "reason": "原因"}
    ],
    "comment": "评语"
  },
  "completeness": {
    "score": 0-35,
    "stars": 1-5,
    "missing_modules": ["缺失模块"],
    "comment": "评语"
  },
  "standardization": {
    "score": 0-25,
    "stars": 1-5,
    "issues": ["不规范之处"],
    "comment": "评语"
  },
  "total_score": 0-100,
  "overall_comment": "总体评价"
}
```
```

### 准确性评分详细Prompt

```
【准确性评分标准（40分）】

请严格检查以下方面：

1. **数值准确性（最高扣8分）**
   - 检查所有数字：血糖、糖化、体重、血压等
   - 每个数值错误扣2分，单位错误扣1分

2. **药物信息准确性（最高扣10分）**
   - 药名错误：每处扣3分
   - 剂量错误：每处扣2分
   - 用法错误：每处扣1.5分

3. **时间信息准确性（最高扣8分）**
   - 发病时间、就诊时间、病程长短
   - 每处错误扣2分

4. **诊断准确性（最高扣8分）**
   - 诊断类型、并发症、合并症
   - 每处错误扣3分

5. **病程描述准确性（最高扣6分）**
   - 病情发展、治疗调整、症状变化
   - 事实性错误每处扣2分

6. **⚠️ 固定扣分项**
   - 如果将糖尿病写入"既往史"：直接扣10分

【评分步骤】
1. 逐句对比病历摘要和原始对话
2. 标记所有不一致之处
3. 根据上述标准计算扣分
4. 准确性得分 = 40 - 总扣分
5. 转换为星级：
   - 38-40分：5星
   - 32-37分：4星
   - 24-31分：3星
   - 16-23分：2星
   - 0-15分：1星
```

### 完整性评分详细Prompt

```
【完整性评分标准（35分）】

请检查以下必备模块：

1. **主诉（7分）**
   ✅ 必须包含：主要症状 + 持续时间
   - 缺少症状：扣4分
   - 缺少时间：扣3分

2. **现病史（14分）**
   ✅ 必须包含：
   - 初次诊断情况（3分）
   - 治疗历程（4分）
   - 近期病情（4分）
   - 并发症情况（3分）
   - 每缺一项按标注分数扣分

3. **既往史（7分）**
   ✅ 应包含：
   - 高血压（2分）
   - 高血脂（2分）
   - 冠心病（2分）
   - 其他慢性病（1分）
   - ⚠️ 不得包含糖尿病

4. **家族史（4分）**
   ✅ 应包含：
   - 糖尿病家族史（3分）
   - 其他相关家族史（1分）

5. **个人史（3分，可选）**
   - 吸烟、饮酒、饮食、运动
   - 对话中提及但未记录：扣1-2分

【评分步骤】
1. 逐个检查上述模块是否存在
2. 检查每个模块内容是否完整
3. 计算总扣分
4. 完整性得分 = 35 - 总扣分
5. 转换为星级：
   - 34-35分：5星
   - 28-33分：4星
   - 21-27分：3星
   - 14-20分：2星
   - 0-13分：1星
```

### 规范性评分详细Prompt

```
【规范性评分标准（25分）】

请检查以下规范性要求：

1. **医学术语规范（8分）**
   ❌ 口语化示例：经常口渴、尿很多、看不清
   ✅ 规范示例：多饮、多尿、视物模糊
   - 每个口语化表述扣1分
   - 术语错误扣2分

2. **结构规范（7分）**
   ✅ 标准顺序：主诉→现病史→既往史→家族史→个人史
   - 顺序错误：扣2分
   - 结构混乱：扣3分

3. **药物书写规范（5分）**
   ✅ 规范格式：药名 + 剂量 + 频率 + 方式
   示例：二甲双胍片 500mg 每日2次 餐后口服
   - 每处不规范扣1分

4. **时间表述规范（3分）**
   ✅ 规范：3年前诊断、近6个月
   ❌ 不规范：很久以前、最近
   - 每处不明确扣1分

5. **整体专业性（2分）**
   - 语言简洁专业
   - 逻辑严密连贯

【评分步骤】
1. 检查所有术语是否规范
2. 检查结构和格式
3. 计算总扣分
4. 规范性得分 = 25 - 总扣分
5. 转换为星级：
   - 24-25分：5星
   - 20-23分：4星
   - 15-19分：3星
   - 10-14分：2星
   - 0-9分：1星
```

---

## 评测流程

### Step 1: 准备评测材料
1. 原始医患对话记录
2. AI生成的病历摘要
3. 评测标准文档

### Step 2: 执行评测
1. 使用评测Prompt调用评测AI（推荐：deepseek-reasoner）
2. 传入对话记录和病历摘要
3. 等待AI输出结构化评分结果

### Step 3: 结果处理
1. 解析JSON格式的评分结果
2. 验证分数计算是否正确
3. 存储评测结果到数据库

### Step 4: 质量控制
1. 随机抽查评测结果
2. 对比人工评分与AI评分
3. 调整Prompt以提高准确性

---

## 评测示例

### 示例对话（简化版）

```
医生：您好，请问您有什么不舒服吗？
患者：我最近总是口渴，喝很多水，上厕所也很频繁。
医生：这种情况多久了？
患者：大概有3个月了。
医生：之前有没有检查过血糖？
患者：去年体检查过，说是有点高，空腹7.2。
医生：现在有在吃药吗？
患者：没有，医生说让我控制饮食就行。
...
```

### AI生成的病历摘要（待评测）

```
主诉：口渴、多饮、多尿3个月

现病史：患者3个月前无明显诱因出现口渴、多饮、多尿症状。
去年体检发现空腹血糖7.2mmol/L，未予重视，未服药治疗，
仅注意饮食控制。近期上述症状持续存在，遂来院就诊。

既往史：否认高血压、糖尿病、冠心病病史。

家族史：父亲有糖尿病病史。

个人史：否认吸烟、饮酒史。
```

### 评测结果示例

```json
{
  "accuracy": {
    "score": 38,
    "stars": 5,
    "deductions": [
      {"item": "去年体检未明确月份", "points": 2, "reason": "时间不够精确"}
    ],
    "comment": "内容基本准确，仅有个别时间表述需要更精确"
  },
  "completeness": {
    "score": 28,
    "stars": 4,
    "missing_modules": ["诊断结果", "近期血糖情况"],
    "comment": "主要模块齐全，但缺少诊断和近期检查结果"
  },
  "standardization": {
    "score": 23,
    "stars": 5,
    "issues": ["个人史可以更详细"],
    "comment": "医学术语规范，结构清晰，符合病历书写要求"
  },
  "total_score": 89,
  "overall_comment": "病历摘要质量优秀，准确性和规范性强，完整性略有欠缺。建议补充诊断结果和近期检查数据。"
}
```

---

## 附录：常见扣分项清单

### 准确性常见扣分项
- [ ] 血糖数值错误
- [ ] 糖化血红蛋白错误
- [ ] 药物名称错误
- [ ] 药物剂量错误
- [ ] 发病时间错误
- [ ] 诊断错误
- [ ] **糖尿病写入既往史（-10分）**

### 完整性常见扣分项
- [ ] 主诉缺少时间
- [ ] 现病史缺少初诊情况
- [ ] 现病史缺少治疗经过
- [ ] 既往史遗漏重要疾病
- [ ] 家族史缺失
- [ ] 个人史遗漏对话中提及的信息

### 规范性常见扣分项
- [ ] 使用"口渴"而非"多饮"
- [ ] 使用"尿多"而非"多尿"
- [ ] 药物书写不规范
- [ ] 时间表述不清晰
- [ ] 结构顺序错误
- [ ] 术语不专业

---

## 版本信息

- **文档版本**: v1.0
- **最后更新**: 2025-11-22
- **适用范围**: 糖尿病病历摘要评测
- **维护者**: AI评测团队

---

## 使用建议

1. **评测AI选择**: 推荐使用 `deepseek-reasoner`，其推理能力强，适合细致的评分任务
2. **评测频率**: 每个病历摘要至少评测1次，重要病例可进行2-3次评测取平均值
3. **结果校验**: 定期进行人工抽查，确保AI评测质量
4. **持续优化**: 根据评测反馈不断调整和优化评测标准

---
