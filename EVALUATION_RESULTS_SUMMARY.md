# 评估结果总结报告

生成时间: 2025-11-18

---

## 📊 总体统计

| 指标 | 数值 |
|------|------|
| **总体完成率** | 77.5% (496/640) |
| **Raw文件数** | 515 |
| **Evaluations文件数** | 496 |
| **解析失败** | 19 (response为空) |
| **患者数** | 10 |
| **模型数** | 8 |

---

## 👥 各患者完成情况

| 患者 | Raw文件 | Evaluations | 完成率 |
|------|---------|-------------|--------|
| 患者1 | 52 | 46 | 71.9% |
| 患者2 | 57 | 54 | 84.4% |
| 患者3 | 51 | 49 | 76.6% |
| 患者4 | 48 | 48 | 75.0% |
| 患者5 | 48 | 46 | 71.9% |
| 患者6 | 52 | 52 | 81.3% |
| 患者7 | 49 | 49 | 76.6% |
| 患者8 | 58 | 53 | 82.8% |
| 患者9 | 53 | 52 | 81.3% |
| 患者10 | 47 | 47 | 73.4% |

**备注**: 每个患者预期64个评估（8个生成模型 × 8个评估模型）

---

## 🏆 模型评分排名

| 排名 | 模型 | 平均分 | 评估数 | 最高分 | 最低分 |
|------|------|--------|--------|--------|--------|
| 🥇 1 | **gemini-2.5-pro** | **4.19** | 56 | 5.00 | 2.40 |
| 🥈 2 | **gpt-5.1** | **3.98** | 52 | 5.00 | 2.40 |
| 🥉 3 | **doubao-seed-1-6-251015** | **3.82** | 57 | 5.00 | 2.00 |
| 4 | qwen3-max | 3.71 | 49 | 5.00 | 2.40 |
| 5 | moonshotai/kimi-k2-0905 | 3.70 | 49 | 4.80 | 2.40 |
| 6 | grok-4-0709 | 3.65 | 52 | 4.60 | 2.40 |
| 7 | deepseek/deepseek-v3.1 | 3.47 | 52 | 5.00 | 2.40 |
| 8 | Baichuan-M2 | 3.23 | 52 | 4.20 | 2.40 |

---

## 📈 评分分布

| 等级 | 分数范围 | 数量 | 百分比 |
|------|----------|------|--------|
| 优秀 | 4.0-5.0 | 182 | 43.4% |
| 良好 | 3.0-3.9 | 188 | 44.9% |
| 中等 | 2.0-2.9 | 49 | 11.7% |
| 较差 | 1.0-1.9 | 0 | 0.0% |
| 很差 | 0.0-0.9 | 0 | 0.0% |

**总评估数**: 419

**重要发现**:
- ✅ 88.3%的评估结果在"良好"及以上（≥3.0分）
- ✅ 43.4%的评估结果达到"优秀"（≥4.0分）
- ✅ 没有评估结果低于2.0分

---

## 🔍 关键发现

### 模型表现亮点

1. **Gemini-2.5-Pro** - 综合表现最佳
   - 平均分4.19，领先第二名0.21分
   - 多次获得满分5.0评价

2. **GPT-5.1** - 稳定可靠
   - 平均分3.98，表现稳定
   - 评估数52，覆盖面广

3. **豆包(Doubao)** - 性价比优秀
   - 平均分3.82，排名第三
   - 评估数57，最多的评估样本

### 需要关注的问题

1. **解析失败** - 19个评估的API响应为空
   - 主要涉及患者1、患者8、患者9
   - 失败的评估者主要是gpt-5.1和Baichuan-M2

2. **完成率差异** - 不同患者完成率不同
   - 最高: 患者2 (84.4%)
   - 最低: 患者1、患者5 (71.9%)

---

## 📋 示例评估结果

### 高分案例（Baichuan-M2 由 Kimi 评估）

**平均分**: 2.80

**各维度评分**:
- accuracy: 3/5
- completeness: 3/5
- format: 2/5
- language: 3/5
- logic: 3/5

**综合评价**:
> 报告能抓取关键病史要素，但药物剂量与用法前后不一致、章节缺项及格式混乱显著降低可信度。

**优点**:
- 主诉提炼简洁，能突出"泡沫尿+体重下降"两大核心症状
- 时间线基本完整，覆盖12年病程及近期住院经过

---

### 优秀案例（Doubao 由 GPT-5.1 评估）

**平均分**: 3.60

**各维度评分**:
- accuracy: 4/5
- completeness: 3/5
- format: 4/5
- language: 4/5
- logic: 3/5

**综合评价**:
> 该报告在还原对话信息方面表现较好，糖尿病病程、用药方案、血糖控制情况、体重变化及家族史等关键内容记录较为准确，结构清晰，语言专业度较高。

**优点**:
- 较完整、准确地记录了糖尿病病程、用药方案和血糖控制情况
- 现病史时间线清晰，能交代关键时间节点

---

## 💡 建议

### 继续执行

还有**144个评估**未完成（22.5%），建议：

```bash
# 查看未完成的具体情况
python3 << 'EOF'
from pathlib import Path
base_dir = Path("output/cross_evaluation_results")
for patient_dir in base_dir.glob("患者*"):
    eval_dir = patient_dir / "evaluations"
    count = len(list(eval_dir.glob("*.json"))) if eval_dir.exists() else 0
    if count < 64:
        print(f"{patient_dir.name}: {count}/64 ({64-count} 待完成)")
EOF

# 继续执行未完成的评估
python run_cross_evaluation.py
```

### 处理失败的评估

对于19个响应为空的评估，可以：

1. **重新运行** - 这些评估会被自动重试
2. **检查日志** - 查看是否有API错误
3. **手动排查** - 检查特定模型的API配置

---

## 📁 文件结构

```
output/cross_evaluation_results/
├── 患者1/
│   ├── raw/                  # 515个原始响应文件
│   │   ├── gpt-5.1_by_deepseek.json
│   │   └── ...
│   └── evaluations/          # 496个解析后的评分文件
│       ├── gpt-5.1_by_deepseek.json
│       └── ...
├── 患者2/
└── ...
```

**Raw文件内容**:
- `input.report_content` - 被评估的完整报告
- `input.prompt` - 发送给评估模型的prompt
- `output.raw_response` - 评估模型的原始响应
- `metadata` - 时间戳、响应时间等元数据

**Evaluations文件内容**:
- `evaluation.dimensions` - 5个维度的评分和理由
- `average_score` - 平均分
- `evaluation.overall_comment` - 综合评价
- `evaluation.strengths/weaknesses/suggestions` - 优缺点和建议

---

## 🎯 下一步行动

1. ✅ **继续执行未完成的评估**
   ```bash
   python run_batch_evaluation.py
   ```

2. ✅ **生成完整的评分矩阵和可视化**
   ```bash
   python run_cross_evaluation.py --skip-evaluation
   ```

3. ✅ **查看可视化结果**
   - 打开 http://localhost:8001/cross_evaluation_viewer.html
   - 查看完整的模型对比和排名

4. ✅ **备份评估结果**
   ```bash
   tar -czf evaluation_results_backup_$(date +%Y%m%d).tar.gz \
       output/cross_evaluation_results/
   ```

---

**报告生成时间**: 2025-11-18
**数据来源**: output/cross_evaluation_results/
**状态**: 进行中（77.5%完成）
